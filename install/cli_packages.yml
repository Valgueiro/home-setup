- name: install cli packages
  become: true
  become_user: root
  apt:
    update_cache: yes
    pkg:
        - vim
        - golang-go
        - git
        - wget
        - gpg
        - apt-transport-https
        - htop
        - rclone
        - nodejs
        - npm

- name: install debian dev packages
  become: true
  become_user: root
  apt:
    update_cache: yes
    pkg:
        - build-essential
        - libssl-dev 
        - zlib1g-dev 
        - libbz2-dev 
        - libreadline-dev 
        - libsqlite3-dev 
        - llvm
        - gettext 
        - libncurses5-dev 
        - tk-dev 
        - tcl-dev 
        - blt-dev 
        - libgdbm-dev 
        - aria2

- name: setup git global config
  shell: "{{ item }}"
  with_items:
    - git config --global user.email "mateusvalgueiro@gmail.com"
    - git config --global user.name "Mateus Valgueiro"

- name: install nvm
  shell: curl https://raw.githubusercontent.com/creationix/nvm/master/install.sh | bash 

- name: install yarn
  become: true
  community.general.npm:
    name: yarn
    global: yes

# [WIP] not working
# - name: install pyenv
#   ignore_errors: yes
#   block:
#     - name: install
#       shell: curl -L https://raw.githubusercontent.com/pyenv/pyenv-installer/master/bin/pyenv-installer | bash

#     - name: add pyenv to zshrc
#       lineinfile:
#         path: /home/mvalgueiro/.zshrc
#         line: "{{ item }}"
#         state: present
#         backup: yes
#       with_items:
#         - 'export PYTHON_BUILD_ARIA2_OPTS="-x 10 -k 1M"'
#         - 'export PATH="~/.pyenv/bin:$PATH"'
#         - 'eval "$(pyenv init --path)"'
#         - 'eval "$(pyenv init -)"'
#         - 'eval "$(pyenv virtualenv-init -)"'

#     - name: install python 3.10
#       shell: pyenv install 3.10


